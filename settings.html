<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8"/>
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
    <title>제이쿼리</title>
    <link rel="stylesheet" href="http://code.jquery.com/mobile/1.4.5/jquery.mobile-1.4.5.min.css"/>
    <script src="http://code.jquery.com/jquery-1.11.1.min.js"></script>
    <script src="http://code.jquery.com/mobile/1.4.5/jquery.mobile-1.4.5.min.js"></script>
      
    <script type="text/javascript" src="./js/paymentDB.js"></script>
    <script type="text/javascript" src="./js/auto_transaction.js"></script>
    <script type="text/javascript" src="./js/category.js"></script>
    <script type="text/javascript" src="./js/security_check.js"></script>
        
      <script>
          $(document).ready( function() {
                openDB_payment(); // 입출금 정보 DB 생성
                openDB_category(); // 카테고리 DB 생성 
                openDB_auto_transaction() // 자동입출금 DB 생성

                createTable(); // 입출금 정보 테이블 생성
                createTableCat(); //카테고리 테이블 생성
                createTableAuto(); //자동입출금 테이블 생성

                createCatList(); //자동입출금 테이블에서 불러와 select 선택지 추가해줌
                //createAutoList(); //자동입출금 테이블에서 불러와 자동입출금 관리 페이지에 카드를 추가해줌
                //insertAutoToDB(); //자동입출금 항목의 해당하는 날짜가 되면 알아서 자동입출금 테이블에 추가해줌
                createCatIcon(); //카테고리 테이블에서 불러와 동그라미 생성해줌
                
                // deletePayment();
                //saveBudget();//예산 최초 저장
                
        });

      </script>
  </head>  

    <!--##################메인 화면######################-->
  <body>
    <div data-role="page" id="main">
      <div data-role="header" data-postion="fixed" style="background-color:rgb(211, 214, 247)">
        <h1 style="font-size:22px; ">설 정</h1>
        <a href="#menu" data-role="button" data-icon="bars" data-iconpos="notext" style="margin-top: 10px;"></a>

        <!--메뉴 창-->
        <div data-role="panel" id="menu" data-display="overlay">
          <div data-role="header">
            <h1>메뉴</h1>
          </div>
          <div data-role="content">
            <tr data-role="listview" data-inset="true">
              <td><a href="#" style="font-size:20px">메 인</a></td>
              <td><a href="#" style="font-size:20px">통계</a></td>
              <td><a href="#" style="font-size:20px">설정</a></td>
            </tr>
          </div>
        </div>
      </div>
      <!--설정 리스트-->
      <ul data-role="listview" data-inset="true">
        <li><a href="#budget" data-transition="slide" style="font-size:20px">예산 설정</a></li>
        <li><a href="#auto" style="font-size:20px">자동 입/출금 관리</a></li>
        <li><a href="#category" style="font-size:20px">카테고리 관리</a></li>
        <li><a href="#password" style="font-size:20px">암호 설정</a></li>
        <li><a href="#reset" style="font-size:20px">초기화</a></li>
      </ul>       
    </div>


      <!--##################예산 설정######################-->
    <div data-role="page" id="budget" style="background-color:rgb(211, 214, 247)">
      <p style="margin-left:16px; margin-top: 110px;font-size:30px;"><b>당신의 예산은...</b></p>
      <!--예산에 대한 정보를 입력받는다.(얼마인지만)-->
      <div data-role="content">
        <fieldset>
          <table>
            <tr>
              <td><label for="budgetInput"style="font-size:20px;">월 </label></td>
              <td><input type="integer" name="budgetInput" id="budgetInput" placeholder="예산 입력"></td>
              <td><label for="budgetInput"style="font-size:20px;">원</label></td>

              <!--저장 버튼을 누르면 updateBudget()이 발동이 되어 자동입출금 테이블에 알아서 이번 달 1일 날짜로 예산 항목으로 추가가 된다.-->
              <td><a href="#main" data-role="button" id="saveBu" data-inline="true" onclick="updateBudget();">저 장</a></td>
            </tr>
          </table>
        </fieldset>
      </div>
      
   </div>


     <!--##################자동 입/출금 관리######################-->

   <!--자동 입출금 관리 메인 홈 페이지. 여기에 자동 입출금 카드가 뜬다(createListAuto)-->
  <div data-role="page" id="auto">
    <div data-role="header"data-position="fixed">
      <a href="#main" data-role="button" data-icon="back" data-iconpos="notext" style="margin-top: 10px;"></a>
      <h1 style="font-size:19px">자동 입/출금 관리</h1>
      <a href="#addAuto" data-role="button" data-transition="slidedown" data-icon="plus" data-iconpos="notext" style="margin-top: 10px;"></a>
    </div>
    <div data-role="content">
      <lu data-role="listview" id="autoShowList">
      </lu>
    </div>
  </div>

  <!--자동 입출금 항목 추가 페이지-->
  <div data-role="page" id="addAuto">
    <div data-role="header">
      <h1>자동 입/출금</h1>
      <a href="#auto" data-role="button" data-transition="slidedown" data-icon="delete" data-iconpos="notext" syle="argin-top:10px;"></a>
    </div>
      <!--추가하는 항목에 대한 정보를 입력받는다-->
      <div data-role="content">
        </div>
        <fieldset>
          <table>
            <tr>
              <td>          
                <select name="select" id="select" data-inline="true">
                  <option value="deposit">입금</option>
                  <option value="withdraw">출금</option>
                </select>
              </td>
              <td>           
                <select name="select2" id="select2" data-inline="true">
                  <option value="0">선택</option>
                </select>
              </td>
              <td>
                <h4>매 월 </h4>
              </td>
              <td>
                <input type="number" name="dateAuto" id="dateAuto" min="1" max="31" placeholder="날짜"></input>
              </td>
              <td>
              <h4>일</h4>
              </td>

            </tr>
          </table>
          <table>
            <tr>
              <td style="width:140px"><input type="text" name="nameAuto" id="nameAuto" style="font-size:22x;" placeholder="상세 내용"></input></td>
              <td style="font-size:25px;">으로</td>
              <td style="width:100px"><input type="number" name="inputAuto" id="inputAuto" style="font-size:22x;" placeholder="금액 입력"></input></td>
              <td><label for="inputAuto"style="font-size:25px;">원</label></td>
            </tr>
          </table>
        </fieldset>


        <!--저장 버튼을 누르면 addAutoMoney 발동으로 자동 입출금 테이블에 업로드된다-->
        <a href="#auto" data-role="button" id="saveAuto" data-transition="slideup" onclick="addAutoMoney();">저장</a>
      </div>
    </div>
  </div>


    <!--##################카테고리 관리######################-->


  <!--카테고리 메인 홈 페이지-->
  <!--이 페이지에 createIconList(동그라미)가 뜨도록 함-->
  <div data-role="page" id="category">
    <div data-role="header"data-position="fixed">
      <a href="#main" data-role="button" data-icon="back"  data-iconpos="notext" style="margin-top: 10px;"></a>
      <a href="#addCat" data-role="button" data-transition="slidedown" data-icon="plus" data-iconpos="notext" style="margin-top: 10px;"></a>
      <h1 style="font-size:19px">카테고리 관리</h1>
    </div>
    <div data-role="content" id="catIcons">
      </div>
    </div>
  </div>

  <!--카테고리 추가 장-->
  <div data-role="page" id="addCat">
    <div data-role="header">
      <h1>카테고리 추가</h1>
      <a href="#category" data-role="button" data-transition="slidedown" data-icon="delete" data-iconpos="notext" syle="argin-top:10px;"></a>
    </div>
    <div data-role="content">
      
      <!--추가하는 카테고리에 대한 정보를 입력받음-->
      <fieldset>
        <table>
          <tr>
            <td><label for="catName"style="font-size:19px;">카테고리 :  </label></td>
            <td><input type="text" name="catName" id="catName" placeholder="이름"></td>
            <td><input type="color" name="catColor" id="catColor"></td>
          </tr>
        </table>
      </fieldset>
      <!--저장 버튼을 누르면 addCategory함수 발동해서 카테고리 테이블에 추가-->
      <a href="#category" data-role="button" id="saveCat" data-transition="slideup" onclick="addCategory();" onclick="top.location='javascript:location.reload()'">저장</a>
    </div>
  </div>





  <!--##################암호설정######################-->

  <!--비번 체크하는 페이지-->
  <div data-role="page" id="password" style="background-color:rgb(211, 214, 247)" >
    <form method=post name=number>
      <p>일단 초기 암호를 0000으로 했습니다</p>
      <p style="text-align: center; margin-top:70px;font-size:30px;"><b>암 호 입 력</b></p>
      <table>
        <tr>
          <td style="width:50px; height:50px; font-size:30px; padding-left:20px;padding-right:10px;"><input maxLength=1 id="number1" name=number1 onkeyup='check_Pass()' autofocus></td>
          <td style="width:50px; height:50px; font-size:30px; padding-left:20px;padding-right:10px;"><input maxLength=1 id="number2" name=number2 onkeyup='check_Pass()'></td>
          <td style="width:50px; height:50px; font-size:30px; padding-left:20px;padding-right:10px;"><input maxLength=1 id="number3" name=number3 onkeyup='check_Pass()'></td>
          <td style="width:50px; height:50px; font-size:30px; padding-left:20px;padding-right:10px;"><input maxLength=1 id="number4" name=number4 onkeyup='check_Pass()'></td>
        </tr>
      </table>
      </form>
    </div>
    <!--비번 변경하는 페이지-->
    <div data-role="page" id="password2" style="background-color:#dddddd;">
      <form method=post name=number2>
      <p>변경한 다음에는 입력한 암호로 확인받으면 됩니다</p>
      <p style="text-align: center; margin-top:70px;font-size:30px;"><b>암 호 입 력</b></p>
        <table>
          <tr>
            <td style="width:50px; height:50px; font-size:30px; padding-left:20px;padding-right:10px;"><input maxLength=1 id="number5" name=number5 onkeyup='change_Pass()' autofocus></td>
            <td style="width:50px; height:50px; font-size:30px; padding-left:20px;padding-right:10px;"><input maxLength=1 id="number6" name=number6 onkeyup='change_Pass()'></td>
            <td style="width:50px; height:50px; font-size:30px; padding-left:20px;padding-right:10px;"><input maxLength=1 id="number7" name=number7 onkeyup='change_Pass()'></td>
            <td style="width:50px; height:50px; font-size:30px; padding-left:20px;padding-right:10px;"><input maxLength=1 id="number8" name=number8 onkeyup='change_Pass()'></td>
          </tr>
        </table>
      </form>
    </div>



  <!--#################초기화######################-->


    <!--초기화 하기-->
    <div data-role="dialog" id="warning">
      <div data-role="header" data-postion="fixed">
        <h1>초기화 경고</h1>
        <div data-role="content"></div>
          <p>전체 초기화를 진행하면 데이터를 복구할 수 없습니다. </br>
            정말로 삭제하시겠습니까? 왜 안뜨지..? </p>
          <a href="#main" data-role="button">네</a>
          <a href="#main" data-role="button">아니오</a>
        </div>
      </div>
    </div>
  </body>
</html> 